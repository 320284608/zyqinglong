# -*- coding:utf-8 -*-
"""
美团 外卖红包
自行捉包把meituan.com里面的token(一般在请求头里)填到变量 meituanCookie 中,
多账号换行或&隔开
export meituanCookie="AgGZIgsYHyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

cron: 0 0,6,10,16,20 * * *
const $ = new Env("美团辅助");
"""
import os
import requests
import json

#print(os.getenv('meituanCookie').split("&"))

for mt in os.getenv('meituanCookie').split("&"):
    print(mt)
    cookie = f"token={mt};"
    headers ={"cookie":cookie,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36","content-type":"application/json;charset=UTF-8"}
    data = {"gundamId":20625,"instanceId":"16807827427780.5322617288978357","actualLongitude":108306020,"actualLatitude":2284462001,"needTj":True,"couponConfigIdOrderCommaString":"7097426641545,7117066535561,7115417977481,7096869323401,7088212804233,7116455346825,7152499753609,7152679518857,7150719664777,7116965347977,6561273283209,6560732021385,4679618396809,4674534769289,4674535031433,4679536411273,4672551977609,2189245219456,3375301526153,3375301722761,3371138220681,3371014881929,3372360729225,620969479,5346931376777,2237835510400,2235023557248,4066658157193,3924566606473,3927917527689,4449821000329,6382949171849,7281017291401,7283307184777,7285054243465,7285182431881,7284436632201,7284030571145,7282966266505,7282280694409,7283618480777,7284070417033,511616988,626467836,621999795,626418652,624362708,1708877283968,1723741504128,5360270377609,5361278190217,5361210294921,5358330643081,511177309,511566737,4575685378697,4401006183049,3242152428169,3801984336521,622936736,603844019,345822793,516213972,3458690974345,622197908,622936732,622740453,622936733,3755289674377,613887410,617540192,588083964,572445327,621999591","couponAllConfigIdOrderString":"7097426641545,7117066535561,7115417977481,7096869323401,7088212804233,7116455346825,7152499753609,7152679518857,7150719664777,7116965347977,6561273283209,6560732021385,4679618396809,4674534769289,4674535031433,4679536411273,4672551977609,2189245219456,3375301526153,3375301722761,3371138220681,3371014881929,3372360729225,620969479,5346931376777,2237835510400,2235023557248,4066658157193,3924566606473,3927917527689,4449821000329,6382949171849,7281017291401,7283307184777,7285054243465,7285182431881,7284436632201,7284030571145,7282966266505,7282280694409,7283618480777,7284070417033,511616988,626467836,621999795,626418652,624362708,1708877283968,1723741504128,5360270377609,5361278190217,5361210294921,5358330643081,511177309,511566737,4575685378697,4401006183049,3242152428169,3801984336521,622936736,603844019,345822793,516213972,3458690974345,622197908,622936732,622740453,622936733,3755289674377,613887410,617540192,588083964,572445327,621999591","rubikCouponKey":"PrizePool-200043026","platform":13,"app":-1,"h5Fingerprint":"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"}
    b = requests.post('https://mediacps.meituan.com/gundam/gundamGrabV4',json=data,headers=headers).json()
    #print(b['data']['allCoupons']);
    for sj in b['data']['allCoupons']:
        print(f"{sj['couponName']}-{sj['amountLimit']}-{sj['couponAmount']}元-{sj['amountLimit']}")
