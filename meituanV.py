# -*- coding:utf-8 -*-
"""
美团 外卖红包
自行捉包把meituan.com里面的token(一般在请求头里)填到变量 meituanCookie 中,
多账号换行或&隔开
export meituanCookie="AgGZIgsYHyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

cron: 2 0,6,10,16,20 * * *
const $ = new Env("美团辅助");
"""
import os
import requests
import json

#print(os.getenv('meituanCookie').split("&"))

for mt in os.getenv('meituanCookie').split("&"):
    print(mt)
    cookie = f"token={mt};"
    headers ={"cookie":cookie,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36","content-type":"application/json;charset=UTF-8"}
    data = {"gundamId":20625,"instanceId":"16807827427780.5322617288978357","actualLongitude":11351536,"actualLatitude":2414378,"needTj":True,"couponConfigIdOrderCommaString":"7097426641545,7117066535561,7115417977481,7096869323401,7088212804233,7116455346825,7152499753609,7152679518857,7150719664777,7116965347977,6561273283209,6560732021385,4679618396809,4674534769289,4674535031433,4679536411273,4672551977609,2189245219456,3375301526153,3375301722761,3371138220681,3371014881929,3372360729225,620969479,5346931376777,2237835510400,2235023557248,4066658157193,3924566606473,3927917527689,4449821000329,6382949171849,7281017291401,7283307184777,7285054243465,7285182431881,7284436632201,7284030571145,7282966266505,7282280694409,7283618480777,7284070417033,511616988,626467836,621999795,626418652,624362708,1708877283968,1723741504128,5360270377609,5361278190217,5361210294921,5358330643081,511177309,511566737,4575685378697,4401006183049,3242152428169,3801984336521,622936736,603844019,345822793,516213972,3458690974345,622197908,622936732,622740453,622936733,3755289674377,613887410,617540192,588083964,572445327,621999591","couponAllConfigIdOrderString":"7097426641545,7117066535561,7115417977481,7096869323401,7088212804233,7116455346825,7152499753609,7152679518857,7150719664777,7116965347977,6561273283209,6560732021385,4679618396809,4674534769289,4674535031433,4679536411273,4672551977609,2189245219456,3375301526153,3375301722761,3371138220681,3371014881929,3372360729225,620969479,5346931376777,2237835510400,2235023557248,4066658157193,3924566606473,3927917527689,4449821000329,6382949171849,7281017291401,7283307184777,7285054243465,7285182431881,7284436632201,7284030571145,7282966266505,7282280694409,7283618480777,7284070417033,511616988,626467836,621999795,626418652,624362708,1708877283968,1723741504128,5360270377609,5361278190217,5361210294921,5358330643081,511177309,511566737,4575685378697,4401006183049,3242152428169,3801984336521,622936736,603844019,345822793,516213972,3458690974345,622197908,622936732,622740453,622936733,3755289674377,613887410,617540192,588083964,572445327,621999591","rubikCouponKey":"PrizePool-200043026","platform":13,"app":-1,"h5Fingerprint":"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"}
    url = "https://mediacps.meituan.com/gundam/gundamGrabV4?yodaReady=h5&csecplatform=4&csecversion=2.1.0"
    b = requests.post(url=url,json=data,headers=headers).json()
    #print(b['data']['allCoupons']);
    for sj in b['data']['allCoupons']:
        print(f"{sj['couponName']}-{sj['amountLimit']}-{sj['couponAmount']}元-{sj['amountLimit']}-{sj['etime']}")
        
    data = {"gundamId":165001,"instanceId":"16454483836900.5080374137278387","actualLongitude":108306046,"actualLatitude":22844505,"needTj":True,"couponConfigIdOrderCommaString":"511616988,511516780","couponAllConfigIdOrderString":"","rubikCouponKey":""}
    b1 = requests.post(url=url,json=data,headers=headers).json()
    #print(b1['data']['allCoupons']);
    for sj in b1['data']['coupons']:
        print(f"{sj['couponName']}-{sj['amountLimit']}-{sj['couponAmount']}元-{sj['amountLimit']}-{sj['etime']}")